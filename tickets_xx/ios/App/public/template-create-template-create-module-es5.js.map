{"version":3,"sources":["webpack:///src/app/template-create/template-create.page.html","webpack:///src/app/template-create/template-create-routing.module.ts","webpack:///src/app/template-create/template-create.module.ts","webpack:///src/app/template-create/template-create.page.scss","webpack:///src/app/template-create/template-create.page.ts"],"names":["routes","path","component","TemplateCreatePageRoutingModule","imports","forChild","exports","TemplateCreatePageModule","declarations","TemplateCreatePage","settings","formBuilder","geolocation","api","camera","loadingCtrl","toastCtrl","router","activatedRoute","username","options","maximumAge","enableHighAccuracy","snapshot","paramMap","get","latitude","longitude","Imagenes","Array","getCurrentPosition","then","resp","coords","error","console","log","template","GetTemplateForm","group","detalle","forEach","input_template","controlName","myFormGroup","request","requestItems","login","getValue","setting_User","templateId","cabecera","id","templateDescripcion","descripcion","items","key","controls","valor","value","push","postData","FormData","filename","imageFile","img","append","JSON","stringify","post","subscribe","result","respuesta","parse","presentToast","tk","navigateByUrl","item","quality","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","getPicture","imageData","date","Date","valueOf","imageName","rImagen","image","window","Ionic","WebView","convertFileSrc","imageBlob","dataURItoBlob","File","type","err","dataURI","byteString","atob","arrayBuffer","ArrayBuffer","length","int8Array","Uint8Array","i","charCodeAt","blob","Blob","msg","create","message","duration","position","cssClass","toast","present","selector"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,QAAMA,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEC,eAAS,EAAE;AAFb,KADqB,CAAvB;;AAWA,QAAaC,+BAA+B;AAAA;AAAA,KAA5C;;AAAaA,mCAA+B,6DAJ3C,+DAAS;AACRC,aAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,aAAO,EAAE,CAAC,4DAAD;AAFD,KAAT,CAI2C,GAA/BH,+BAA+B,CAA/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACMb,QAAaI,wBAAwB;AAAA;AAAA,KAArC;;AAAaA,4BAAwB,6DATpC,+DAAS;AACRH,aAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAGK,kEAHL,EAIP,+FAJO,CADD;AAORI,kBAAY,EAAE,CAAC,wEAAD;AAPN,KAAT,CASoC,GAAxBD,wBAAwB,CAAxB;;;;;;;;;;;;;;;;ACtBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uECMf;;;AA8BA,QAAaE,kBAAkB;AAS7B,kCAAoBC,QAApB,EAAqDC,WAArD,EAAsFC,WAAtF,EAAuHC,GAAvH,EAA8IC,MAA9I,EACUC,WADV,EAEUC,SAFV,EAGYC,MAHZ,EAIWC,cAJX,EAIyC;AAAA;;AAJrB,aAAAR,QAAA,GAAAA,QAAA;AAAiC,aAAAC,WAAA,GAAAA,WAAA;AAAiC,aAAAC,WAAA,GAAAA,WAAA;AAAiC,aAAAC,GAAA,GAAAA,GAAA;AAAuB,aAAAC,MAAA,GAAAA,MAAA;AACpI,aAAAC,WAAA,GAAAA,WAAA;AACA,aAAAC,SAAA,GAAAA,SAAA;AACE,aAAAC,MAAA,GAAAA,MAAA;AACD,aAAAC,cAAA,GAAAA,cAAA;AATX,aAAAC,QAAA,GAAS,IAAT;AAUO;;AAdsB;AAAA;AAAA,mCAgBlB;AAAA;;AACT,eAAKC,OAAL,GAAe;AACbC,sBAAU,EAAE,GADC;AAEbC,8BAAkB,EAAE;AAFP,WAAf;AAKA,eAAKH,QAAL,GAAgB,KAAKD,cAAL,CAAoBK,QAApB,CAA6BC,QAA7B,CAAsCC,GAAtC,CAA0C,UAA1C,CAAhB;AACA,eAAKC,QAAL,GAAc,EAAd;AACA,eAAKC,SAAL,GAAe,EAAf;AACA,eAAKC,QAAL,GAAc,IAAIC,KAAJ,EAAd;AACA,eAAKjB,WAAL,CAAiBkB,kBAAjB,CAAoC,KAAKV,OAAzC,EAAkDW,IAAlD,CAAuD,UAACC,IAAD,EAAU;AAC/D,iBAAI,CAACN,QAAL,GAAeM,IAAI,CAACC,MAAL,CAAYP,QAA3B;AACA,iBAAI,CAACC,SAAL,GAAeK,IAAI,CAACC,MAAL,CAAYN,SAA3B;AACA,WAHF,WAGU,UAACO,KAAD,EAAW;AAClBC,mBAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCF,KAAtC;AACD,WALF;AAOA,eAAKG,QAAL,GAAc,KAAK3B,QAAL,CAAc4B,eAAd,EAAd;AACAH,iBAAO,CAACC,GAAR,CAAa,KAAKC,QAAlB;AACA,cAAIE,KAAK,GAAC,EAAV;AACA,eAAKF,QAAL,CAAcG,OAAd,CAAsBC,OAAtB,CAA8B,UAAAC,cAAc,EAAE;AAC5CH,iBAAK,CAACG,cAAc,CAACC,WAAhB,CAAL,GAAkC,IAAI,0DAAJ,CAAgB,EAAhB,CAAlC,CAD4C,CAE5C;AACD,WAHD;AAIA,eAAKC,WAAL,GAAmB,IAAI,wDAAJ,CAAcL,KAAd,CAAnB,CAxBS,CAyBT;AACD;AA1C4B;AAAA;AAAA,mCA2CrB;AAAA;;AAGN,cAAIM,OAAO,GAAY,EAAvB;AACC,cAAIC,YAAY,GAAgB,EAAhC;AAEDD,iBAAO,CAACnB,QAAR,GAAiB,KAAKA,QAAtB;AACAmB,iBAAO,CAAClB,SAAR,GAAkB,KAAKA,SAAvB;AACAkB,iBAAO,CAACE,KAAR,GAAc,KAAKrC,QAAL,CAAcsC,QAAd,CAAuB,0EAAgBC,YAAvC,CAAd;AAEAJ,iBAAO,CAACK,UAAR,GAAmB,KAAKb,QAAL,CAAcc,QAAd,CAAuBC,EAA1C;AACAP,iBAAO,CAACQ,mBAAR,GAA4B,KAAKhB,QAAL,CAAcc,QAAd,CAAuBG,WAAnD;AAEAT,iBAAO,CAACU,KAAR,GAAc,IAAI1B,KAAJ,EAAd;;AACA,eAAK,IAAI2B,GAAT,IAAgB,KAAKZ,WAAL,CAAiBa,QAAjC,EAA2C;AACzCX,wBAAY,GAAiB,EAA7B;AACAA,wBAAY,CAACM,EAAb,GAAgBI,GAAhB;AACAV,wBAAY,CAACY,KAAb,GAAmB,KAAKd,WAAL,CAAiBa,QAAjB,CAA0BD,GAA1B,EAA+BG,KAAlD;AAEAd,mBAAO,CAACU,KAAR,CAAcK,IAAd,CAAmBd,YAAnB;AACD;;AACFX,iBAAO,CAACC,GAAR,CAAY,KAAKQ,WAAL,CAAiBa,QAA7B,EArBO,CAwBN;AAEA;AACA;AACA;AACA;;AAEA,cAAKI,QAAQ,GAAG,IAAIC,QAAJ,EAAhB;AAEA,cAAIC,QAAJ;AAEC,cAAIC,SAAJ;AAEA,eAAKpC,QAAL,CAAca,OAAd,CAAsB,UAASwB,GAAT,EAAY;AACjCF,oBAAQ,GAAC,SAAOE,GAAG,CAACb,EAApB;AAGAS,oBAAQ,CAACK,MAAT,CAAgBH,QAAhB,EAA0BE,GAAG,CAACD,SAA9B;AACA,WALD,EArCK,CA+CN;AACA;;AACAH,kBAAQ,CAACK,MAAT,CAAgB,IAAhB,EAAsBC,IAAI,CAACC,SAAL,CAAevB,OAAf,CAAtB;AAGA,eAAKhC,GAAL,CAASwD,IAAT,CAAc,mBAAd,EAAkCR,QAAlC,EAA4CS,SAA5C,CAAsD,UAACC,MAAD,EAAY;AAChE,gBAAIC,SAAS,GAACL,IAAI,CAACM,KAAL,CAAWN,IAAI,CAACC,SAAL,CAAeG,MAAf,CAAX,CAAd,CADgE,CAEhE;;AACA,kBAAI,CAACG,YAAL,CAAkB,gBAAeF,SAAS,CAACG,EAAzB,GAA6B,GAA/C;;AACA,kBAAI,CAAC1D,MAAL,CAAY2D,aAAZ,CAA0B,MAA1B;AACD,WALD;AAOJ;;;;;AAMC,SA5G8B,CA6G/B;AACA;AACA;AACA;;AAhH+B;AAAA;AAAA,mCAiHpBC,IAjHoB,EAiHhB;AAAA;;AAGb,cAAMzD,OAAO,GAAkB;AAC/B0D,mBAAO,EAAE,EADsB;AAE/BC,2BAAe,EAAE,KAAKjE,MAAL,CAAYkE,eAAZ,CAA4BC,QAFd;AAG/BC,wBAAY,EAAE,KAAKpE,MAAL,CAAYqE,YAAZ,CAAyBC,IAHR;AAI/BC,qBAAS,EAAE,KAAKvE,MAAL,CAAYwE,SAAZ,CAAsBC;AAJF,WAA/B;AASA,eAAKzE,MAAL,CAAY0E,UAAZ,CAAuBpE,OAAvB,EAAgCW,IAAhC,CAAqC,UAAC0D,SAAD,EAAe;AAEpD;AACA;AACA,gBAAMC,IAAI,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAb;AACA,gBAAMC,SAAS,GAAGH,IAAI,GAAE,OAAxB;AACA,gBAAII,OAAO,GAAiB,EAA5B;AACAA,mBAAO,CAAC1C,EAAR,GAAWyB,IAAX;AACAiB,mBAAO,CAACL,SAAR,GAAkBA,SAAlB;AACAK,mBAAO,CAACC,KAAR,GAAoBC,MAAO,CAACC,KAAR,CAAcC,OAAd,CAAsBC,cAAtB,CAAqCV,SAArC,CAApB;AACA,gBAAIW,SAAJ;AACAA,qBAAS,GAAI,MAAI,CAACC,aAAL,CAAmBP,OAAO,CAACL,SAA3B,CAAb;AAEAK,mBAAO,CAAC9B,SAAR,GAAoB,IAAIsC,IAAJ,CAAS,CAACF,SAAD,CAAT,EAAsBP,SAAtB,EAAiC;AAAEU,kBAAI,EAAE;AAAR,aAAjC,CAApB,CAboD,CAcpD;;AACA,kBAAI,CAAC3E,QAAL,CAAcgC,IAAd,CAAmBkC,OAAnB;;AACA,kBAAI,CAACpB,YAAL,CAAkB,kBAAlB,EAhBoD,CAiBpD;AACA;AACA;AACA;;AAGC,WAvBD,EAuBG,UAAC8B,GAAD,EAAS;AACT;AACD;AACA,kBAAI,CAAC9B,YAAL,CAAkB,uBAAlB;AACH,WA3BC;AA4BD;AAzJ8B;AAAA;AAAA,sCA0JjB+B,OA1JiB,EA0JR;AACrB,cAAMC,UAAU,GAAGV,MAAM,CAACW,IAAP,CAAYF,OAAZ,CAAnB;AACA,cAAMG,WAAW,GAAG,IAAIC,WAAJ,CAAgBH,UAAU,CAACI,MAA3B,CAApB;AACA,cAAMC,SAAS,GAAG,IAAIC,UAAJ,CAAeJ,WAAf,CAAlB;;AACA,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,UAAU,CAACI,MAA/B,EAAuCG,CAAC,EAAxC,EAA4C;AAC1CF,qBAAS,CAACE,CAAD,CAAT,GAAeP,UAAU,CAACQ,UAAX,CAAsBD,CAAtB,CAAf;AACA;;AACF,cAAME,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACL,SAAD,CAAT,EAAsB;AAAER,gBAAI,EAAE;AAAR,WAAtB,CAAb;AACD,iBAAOY,IAAP;AACA;AAnK8B;AAAA;AAAA,qCAoKZE,GApKY,EAoKP;;;;;;;;AACR,2BAAM,KAAKrG,SAAL,CAAesG,MAAf,CAAsB;AACxCC,6BAAO,EAAEF,GAD+B;AAExCG,8BAAQ,EAAE,IAF8B;AAGxCC,8BAAQ,EAAE,KAH8B;AAIxC;AACAC,8BAAQ,EAAE,OAL8B,CAMvC;AACH;;AAP0C,qBAAtB,CAAN;;;AAARC,yB;AASNA,yBAAK,CAACC,OAAN;;;;;;;;;AAED;AAhL8B;AAAA;AAAA,2CAiLNP,GAjLM,EAiLD;;;;;;;;AACd,2BAAM,KAAKrG,SAAL,CAAesG,MAAf,CAAsB;AACxCC,6BAAO,EAAEF,GAD+B;AAExCG,8BAAQ,EAAE,IAF8B;AAGxCC,8BAAQ,EAAE,QAH8B;AAIxC;AACAC,8BAAQ,EAAE,OAL8B,CAMvC;AACH;;AAP0C,qBAAtB,CAAN;;;AAARC,yB;AASNA,yBAAK,CAACC,OAAN;;;;;;;;;AAED;AA7L8B;;AAAA;AAAA,OAA/B;;;;cAS+B;;cAAqC;;cAAiC;;cAAwB;;cAA2B;;cAC/H;;cACF;;cACA;;cACM;;;;AAbhBnH,sBAAkB,6DAL9B,gEAAU;AACToH,cAAQ,EAAE,qBADD;AAETxF,cAAQ,EAAR;AAAA;AAAA,8GAFS;;;;AAAA,KAAV,CAK8B,GAAlB5B,kBAAkB,CAAlB","file":"template-create-template-create-module-es5.js","sourcesContent":["export default \"<!-- <a routerLink=\\\"/home\\\">home</a> -->\\n<ng-container *ngIf=\\\"template\\\"> \\n  \\n\\n<!--<ion-header>\\n  <ion-toolbar>\\n    <ion-title>{{template.cabecera.descripcion}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>-->\\n<!--<ion-content>\\n  <div class=\\\"cabeceras\\\">\\n    <p class=\\\"titulos-cab\\\">Hola <strong>{{ infoUsuario.usuarioNombre }}</strong></p>\\n    <p class=\\\"titulos-cab-pagina\\\">ALTA DE TICKET / {{template.cabecera.descripcion}}</p>\\n  </div> \\n</ion-content>-->\\n\\n<ion-content>\\n  \\n  <div class=\\\"cabeceras\\\">\\n    <a routerLink=\\\"/home\\\">\\n      <img src=\\\"../../assets/back.png\\\" style=\\\"max-height: 17px;top: 35px;position: absolute;margin-left: 4px;\\\"/>\\n    </a>\\n    <p class=\\\"titulos-cab\\\" style=\\\" max-width: 70%;\\\">Hola <strong>{{username}} </strong></p>\\n    <p class=\\\"titulos-cab-pagina\\\">ALTA DE TICKET</p>\\n    <a routerLink=\\\"/help\\\">\\n      <img src=\\\"../../assets/menu.png\\\" style=\\\"max-height: 17px;position: absolute; top: 35px;float: right; right: 30px;\\\" />\\n    </a>\\n    </div>\\n\\n  <div>\\n    <br/>\\n  <p class=\\\"subtitulos cuerpo\\\">\\n  {{template.cabecera.descripcion}}\\n  </p>\\n  <form [formGroup]=\\\"myFormGroup\\\" (ngSubmit)=\\\"onSubmit()\\\" class=\\\"cuerpo\\\">\\n    <div *ngFor=\\\"let form_elem of template.detalle\\\">\\n      <!-- <label>{{form_elem.label}}</label>-->\\n      <ion-label class=\\\"labels-template\\\">{{form_elem.label}}</ion-label>\\n    <div [ngSwitch]=\\\"form_elem.tipo\\\">\\n      <div *ngSwitchCase=\\\"'1'\\\" style=\\\"margin-bottom: 15px;\\\"><!--texto -->\\n        <input class=\\\"input-template\\\" type=\\\"text\\\" formControlName=\\\"{{form_elem.controlName}}\\\"/>\\n      </div>\\n      <div *ngSwitchCase=\\\"'5'\\\" style=\\\"margin-bottom: 15px;\\\"><!--Numero -->\\n        <input class=\\\"input-template\\\" type=\\\"number\\\" formControlName=\\\"{{form_elem.controlName}}\\\"/>\\n      </div>\\n      <div *ngSwitchCase=\\\"'2'\\\" style=\\\"margin-bottom: 15px;\\\" class=\\\"check-container-template\\\" ><!--check--> \\n        <input class=\\\"check-template\\\" type=\\\"checkbox\\\" formControlName=\\\"{{form_elem.controlName}}\\\"/>\\n      </div>\\n      <div *ngSwitchCase=\\\"'4'\\\" style=\\\"margin-bottom: 15px;\\\"><!--imagen -->\\n        <!-- <div id=\\\"{{form_elem.controlName}}\\\" name=\\\"{{form_elem.controlName}}\\\"> -->\\n        <ion-button   (click)=\\\"openCamera(form_elem.controlName)\\\" > Tomar Foto \\n         \\n       </ion-button>\\n        <!-- </div> -->\\n        <!-- <ion-label>NO IMplementado</ion-label> -->\\n      </div>\\n      \\n      <div *ngSwitchCase=\\\"'3'\\\" style=\\\"margin-bottom: 15px;\\\"><!--combo -->\\n        <select class=\\\"input-template\\\" formControlName=\\\"{{form_elem.controlName}}\\\">\\n          <option *ngFor=\\\"let opt of form_elem.tipoComboItems\\\" [value]=\\\"opt.descripcion\\\">\\n            {{opt.descripcion}}\\n          </option>\\n        </select>\\n        \\n      </div>\\n    </div>  \\n    </div>\\n    <input type=\\\"submit\\\" class=\\\"guardar-salvar\\\" value=\\\"GUARDAR\\\"/>\\n    <br/>\\n    <br/>\\n  </form>\\n  </div>\\n\\n</ion-content>\\n </ng-container> \\n <ion-footer class=\\\"footer\\\">\\n  <p class=\\\"txt-footer\\\">Copyright Â© 2020</p>\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TemplateCreatePage } from './template-create.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TemplateCreatePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TemplateCreatePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TemplateCreatePageRoutingModule } from './template-create-routing.module';\n\nimport { TemplateCreatePage } from './template-create.page';\n\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,ReactiveFormsModule,\n    TemplateCreatePageRoutingModule\n  ],\n  declarations: [TemplateCreatePage]\n})\nexport class TemplateCreatePageModule {}\n","export default \".input-template {\\n  /*--background: #3880ff;*/\\n  --color: #333333;\\n  margin-bottom: 20px;\\n  width: 100%;\\n  height: 50px;\\n  border-radius: 5px;\\n  box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.16);\\n  border: solid 1px #9b9b9b;\\n  background-color: #ffffff;\\n  margin-left: auto;\\n  margin-right: auto;\\n  padding-left: 15px;\\n}\\n\\n.labels-template {\\n  font-family: Montserrat;\\n  font-size: 12px;\\n  font-weight: 300;\\n  font-stretch: normal;\\n  font-style: normal;\\n  line-height: 1.2;\\n  letter-spacing: normal;\\n  text-align: left;\\n  color: #707070;\\n  text-transform: uppercase;\\n}\\n\\n.check-container-template {\\n  border-top: 1px solid #d8d8d8;\\n  margin-bottom: 15px;\\n  padding-top: 10px;\\n  margin-top: 10px;\\n}\\n\\n.check-template {\\n  position: relative;\\n  top: -40px;\\n  float: right;\\n  right: 0px;\\n  width: 20px;\\n  height: 20px;\\n  border-radius: 5px;\\n  box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.16);\\n  border: solid 1px #ffffff;\\n}\\n\\nion-button {\\n  width: 50%;\\n  height: 35px;\\n  border-radius: 5px;\\n  background-color: #3b65ee;\\n  font-family: Montserrat;\\n  font-size: 11px;\\n  font-weight: bold;\\n  font-stretch: normal;\\n  font-style: normal;\\n  line-height: 1.2;\\n  letter-spacing: normal;\\n  text-align: center;\\n  color: #ffffff;\\n  text-transform: uppercase;\\n  box-shadow: 0 5px #244CCC;\\n  margin-bottom: 10px;\\n  position: relative;\\n  top: -46px;\\n  float: right;\\n}\\n\\n.guardar-salvar {\\n  width: 100%;\\n  height: 35px;\\n  border-radius: 5px;\\n  background-color: #0DE27F;\\n  font-family: Montserrat;\\n  font-size: 11px;\\n  font-weight: bold;\\n  font-stretch: normal;\\n  font-style: normal;\\n  line-height: 1.2;\\n  letter-spacing: normal;\\n  text-align: center;\\n  color: #ffffff;\\n  text-transform: uppercase;\\n  box-shadow: 0 5px #00B15F;\\n  margin-bottom: 10px;\\n  border: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGVtcGxhdGUtY3JlYXRlL0M6XFxQcm9qZWN0c1xcTHRrX1RpY2tldFxcdGlja2V0cy9zcmNcXGFwcFxcdGVtcGxhdGUtY3JlYXRlXFx0ZW1wbGF0ZS1jcmVhdGUucGFnZS5zY3NzIiwic3JjL2FwcC90ZW1wbGF0ZS1jcmVhdGUvdGVtcGxhdGUtY3JlYXRlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSwyQ0FBQTtFQUNBLHlCQUFBO0VBQ0EseUJBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7QUNDSjs7QURDQTtFQUNJLHVCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0VBQ0Esb0JBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0Esc0JBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7RUFDQSx5QkFBQTtBQ0VKOztBREFFO0VBQ0UsNkJBQUE7RUFDQSxtQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7QUNHSjs7QURERTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLDJDQUFBO0VBQ0EseUJBQUE7QUNJSjs7QURGQTtFQUNFLFVBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtFQUNBLHVCQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0Esb0JBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQkFBQTtFQUNBLGNBQUE7RUFDQSx5QkFBQTtFQUNBLHlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNFLFVBQUE7RUFDQSxZQUFBO0FDS0o7O0FESEE7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSx1QkFBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtFQUNBLG9CQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7RUFDQSxjQUFBO0VBQ0EseUJBQUE7RUFDQSx5QkFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtBQ01GIiwiZmlsZSI6InNyYy9hcHAvdGVtcGxhdGUtY3JlYXRlL3RlbXBsYXRlLWNyZWF0ZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW5wdXQtdGVtcGxhdGUge1xyXG4gICAgLyotLWJhY2tncm91bmQ6ICMzODgwZmY7Ki9cclxuICAgIC0tY29sb3I6ICMzMzMzMzM7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDNweCA2cHggMCByZ2JhKDAsIDAsIDAsIDAuMTYpO1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggIzliOWI5YjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XHJcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxuICAgIHBhZGRpbmctbGVmdDogMTVweDtcclxufVxyXG4ubGFiZWxzLXRlbXBsYXRlIHtcclxuICAgIGZvbnQtZmFtaWx5OiBNb250c2VycmF0O1xyXG4gICAgZm9udC1zaXplOjEycHg7XHJcbiAgICBmb250LXdlaWdodDogMzAwO1xyXG4gICAgZm9udC1zdHJldGNoOiBub3JtYWw7XHJcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XHJcbiAgICBsaW5lLWhlaWdodDogMS4yO1xyXG4gICAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDtcclxuICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICBjb2xvcjogIzcwNzA3MDtcclxuICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgfVxyXG4gIC5jaGVjay1jb250YWluZXItdGVtcGxhdGUgIHtcclxuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZDhkOGQ4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xyXG4gICAgbWFyZ2luLXRvcDogMTBweDtcclxufVxyXG4gIC5jaGVjay10ZW1wbGF0ZSB7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICB0b3A6IC00MHB4O1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgcmlnaHQ6IDBweDtcclxuICAgIHdpZHRoOiAyMHB4O1xyXG4gICAgaGVpZ2h0OiAyMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgYm94LXNoYWRvdzogMCAzcHggNnB4IDAgcmdiYSgwLCAwLCAwLCAwLjE2KTtcclxuICAgIGJvcmRlcjogc29saWQgMXB4ICNmZmZmZmY7XHJcbn1cclxuaW9uLWJ1dHRvbiB7XHJcbiAgd2lkdGg6IDUwJTtcclxuICBoZWlnaHQ6MzVweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzNiNjVlZTtcclxuICBmb250LWZhbWlseTogTW9udHNlcnJhdDtcclxuICBmb250LXNpemU6IDExcHg7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgZm9udC1zdHJldGNoOiBub3JtYWw7XHJcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xyXG4gIGxpbmUtaGVpZ2h0OiAxLjI7XHJcbiAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcclxuICBib3gtc2hhZG93OiAwIDVweCAjMjQ0Q0NDO1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgdG9wOiAtNDZweDtcclxuICAgIGZsb2F0OiByaWdodDtcclxufVxyXG4uZ3VhcmRhci1zYWx2YXIge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMzVweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzBERTI3RjtcclxuICBmb250LWZhbWlseTogTW9udHNlcnJhdDtcclxuICBmb250LXNpemU6IDExcHg7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgZm9udC1zdHJldGNoOiBub3JtYWw7XHJcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xyXG4gIGxpbmUtaGVpZ2h0OiAxLjI7XHJcbiAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcclxuICBib3gtc2hhZG93OiAwIDVweCAjMDBCMTVGO1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgYm9yZGVyOiAwcHg7XHJcbn1cclxuIiwiLmlucHV0LXRlbXBsYXRlIHtcbiAgLyotLWJhY2tncm91bmQ6ICMzODgwZmY7Ki9cbiAgLS1jb2xvcjogIzMzMzMzMztcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogNTBweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBib3gtc2hhZG93OiAwIDNweCA2cHggMCByZ2JhKDAsIDAsIDAsIDAuMTYpO1xuICBib3JkZXI6IHNvbGlkIDFweCAjOWI5YjliO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBwYWRkaW5nLWxlZnQ6IDE1cHg7XG59XG5cbi5sYWJlbHMtdGVtcGxhdGUge1xuICBmb250LWZhbWlseTogTW9udHNlcnJhdDtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBmb250LXdlaWdodDogMzAwO1xuICBmb250LXN0cmV0Y2g6IG5vcm1hbDtcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBsaW5lLWhlaWdodDogMS4yO1xuICBsZXR0ZXItc3BhY2luZzogbm9ybWFsO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBjb2xvcjogIzcwNzA3MDtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbn1cblxuLmNoZWNrLWNvbnRhaW5lci10ZW1wbGF0ZSB7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZDhkOGQ4O1xuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICBwYWRkaW5nLXRvcDogMTBweDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuLmNoZWNrLXRlbXBsYXRlIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IC00MHB4O1xuICBmbG9hdDogcmlnaHQ7XG4gIHJpZ2h0OiAwcHg7XG4gIHdpZHRoOiAyMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgYm94LXNoYWRvdzogMCAzcHggNnB4IDAgcmdiYSgwLCAwLCAwLCAwLjE2KTtcbiAgYm9yZGVyOiBzb2xpZCAxcHggI2ZmZmZmZjtcbn1cblxuaW9uLWJ1dHRvbiB7XG4gIHdpZHRoOiA1MCU7XG4gIGhlaWdodDogMzVweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjM2I2NWVlO1xuICBmb250LWZhbWlseTogTW9udHNlcnJhdDtcbiAgZm9udC1zaXplOiAxMXB4O1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgZm9udC1zdHJldGNoOiBub3JtYWw7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogI2ZmZmZmZjtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgYm94LXNoYWRvdzogMCA1cHggIzI0NENDQztcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IC00NnB4O1xuICBmbG9hdDogcmlnaHQ7XG59XG5cbi5ndWFyZGFyLXNhbHZhciB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDM1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzBERTI3RjtcbiAgZm9udC1mYW1pbHk6IE1vbnRzZXJyYXQ7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGZvbnQtc3RyZXRjaDogbm9ybWFsO1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGxpbmUtaGVpZ2h0OiAxLjI7XG4gIGxldHRlci1zcGFjaW5nOiBub3JtYWw7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIGJveC1zaGFkb3c6IDAgNXB4ICMwMEIxNUY7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIGJvcmRlcjogMHB4O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport {FormBuilder, FormGroup,FormControl, Validators  } from '@angular/forms';\nimport {SettingsService} from '../service/settings.service';\nimport { Geolocation , GeolocationOptions, Geoposition, PositionError} from '@ionic-native/geolocation/ngx';\nimport {ApiService} from '../service/api.service';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\n//import { fileURLToPath } from 'url';\nimport { LoadingController,ToastController  } from '@ionic/angular';\nimport { Router } from  \"@angular/router\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { templateJitUrl } from '@angular/compiler';\ninterface RequestImagen  {\n  id: string;\n  image;\n  imageData;      \n  imageFile;\n}    \ntype RequestTkItem = {\n  id: string;\n  valor: string;\n  \n}\n type RequestTk = {\n   templateId:number;\n   templateDescripcion:string;\n  login: string;\n  latitude: number;\n  longitude: number;\n  items: RequestTkItem[] \n}\n\n@Component({\n  selector: 'app-template-create',\n  templateUrl: './template-create.page.html',\n  styleUrls: ['./template-create.page.scss'],\n})\nexport class TemplateCreatePage implements OnInit {\n // disabledButtonId: string;\n  options: GeolocationOptions;\n  Imagenes:RequestImagen[];\n  username=null;\n  template: any ;\n  latitude:any;\n  longitude:any;\n  myFormGroup:FormGroup;\n  constructor(private settings:SettingsService,private formBuilder: FormBuilder,private geolocation: Geolocation,private api:ApiService,private camera: Camera\n    ,public loadingCtrl: LoadingController,\n    private toastCtrl: ToastController,\n     private  router:  Router,\n     private activatedRoute: ActivatedRoute\n    ) { }\n\n  ngOnInit() {\n    this.options = {\n      maximumAge: 500,\n      enableHighAccuracy: true\n    };\n\n    this.username = this.activatedRoute.snapshot.paramMap.get(\"username\");\n    this.latitude=\"\";\n    this.longitude=\"\";\n    this.Imagenes=new Array();\n    this.geolocation.getCurrentPosition(this.options).then((resp) => {\n      this.latitude= resp.coords.latitude;\n      this.longitude=resp.coords.longitude;\n     }).catch((error) => {\n       console.log('Error getting location', error);\n     });\n\n    this.template=this.settings.GetTemplateForm();\n    console.log( this.template);\n    let group={}    \n    this.template.detalle.forEach(input_template=>{\n      group[input_template.controlName]=new FormControl('');  \n      //this.disabledButtonId=input_template.controlName;\n    })\n    this.myFormGroup = new FormGroup(group);\n    //this.myFormGroup.get('6_4').disable({onlySelf: true});\n  }\n  onSubmit(){\n\n\n    let request=<RequestTk>{};\n     let requestItems=<RequestTkItem>{};\n    \n    request.latitude=this.latitude;\n    request.longitude=this.longitude;\n    request.login=this.settings.getValue(SettingsService.setting_User)\n    \n    request.templateId=this.template.cabecera.id;\n    request.templateDescripcion=this.template.cabecera.descripcion;\n\n    request.items=new Array();\n    for (let key in this.myFormGroup.controls) {\n      requestItems= <RequestTkItem>{};\n      requestItems.id=key;\n      requestItems.valor=this.myFormGroup.controls[key].value\n      \n      request.items.push(requestItems);      \n    }\n   console.log(this.myFormGroup.controls);\n\n    \n    //alert(JSON.stringify(request));//{'numero': '5'}\n    \n    // this.api.post2(\"api/ticket\",request).subscribe((result)=>{\n    //   console.log(result);\n    // });\n    //console.log(request);\n\n    let  postData = new FormData();\n   \n    let filename:string;\n    \n     let imageFile:any;\n     \n     this.Imagenes.forEach(function(img){\n      filename=\"file\"+img.id; \n      \n      \n      postData.append(filename, img.imageFile);\n     }); \n      \n    \n    \n    \n    //postData.append('file2', imageFile);\n    //postData.append('title', imageName);\n    postData.append('tk', JSON.stringify(request));\n\n    \n    this.api.post(\"api/ticket/upload\",postData).subscribe((result) => {\n      var respuesta=JSON.parse(JSON.stringify(result)); \n      //console.log(respuesta.tk);\n      this.presentToast(\"Creo el tk \" +respuesta.tk+ \"!\");\n      this.router.navigateByUrl('home');\n    });\n\n/*\n    this.api.get(\"api/ticket?numero=5\").subscribe((result)=>{\n      console.log(result);\n    });\n  */  \n\n} \n// checkIsEnabled(item) {\n//   alert(\"disabledButtonId: \"+this.disabledButtonId + \" item:\"+item)\n//   return this.disabledButtonId!=item;\n// }\nopenCamera(item){\n\n\n  const options: CameraOptions = {\n  quality: 20,\n  destinationType: this.camera.DestinationType.DATA_URL,\n  encodingType: this.camera.EncodingType.JPEG,\n  mediaType: this.camera.MediaType.PICTURE,\n }\n \n\n\n  this.camera.getPicture(options).then((imageData) => {\n\n  // this.imageData = imageData;  \n  // this.image=(<any>window).Ionic.WebView.convertFileSrc(imageData);\n  const date = new Date().valueOf();    \n  const imageName = date+ '.jpeg'; \n  let rImagen= <RequestImagen>{};\n  rImagen.id=item;\n  rImagen.imageData=imageData;\n  rImagen.image=(<any>window).Ionic.WebView.convertFileSrc(imageData);\n  let imageBlob:any;\n  imageBlob =  this.dataURItoBlob(rImagen.imageData);\n\n  rImagen.imageFile = new File([imageBlob], imageName, { type: 'image/jpeg' })\n  //console.log(rImagen);\n  this.Imagenes.push(rImagen);\n  this.presentToast(\"Imagen Agregada!\");\n  //this.myFormGroup.get[item].disable();\n  //console.log(item);\n  //this.myFormGroup.get(item).disable({onlySelf: true});\n  //this.disabledButtonId=item;\n  \n  \n  }, (err) => {\n     // Handle error\n    // alert(\"error \"+JSON.stringify(err))\n    this.presentToast(\"Imagen no agregada!. \");\n});\n}\ndataURItoBlob(dataURI) {\n  const byteString = window.atob(dataURI);\n  const arrayBuffer = new ArrayBuffer(byteString.length);\n  const int8Array = new Uint8Array(arrayBuffer);\n  for (let i = 0; i < byteString.length; i++) {\n    int8Array[i] = byteString.charCodeAt(i);\n   }\n  const blob = new Blob([int8Array], { type: 'image/jpeg' });    \n return blob;\n}\nasync presentToast(msg) {\n  const toast = await this.toastCtrl.create({\n    message: msg,\n    duration: 4000,//3000,\n    position: 'top',\n    //color: 'danger',\n    cssClass: 'toast'\n     //showCloseButton: true,\n  //   closeButtonText: \"OK\",\n  });\n  toast.present();\n       \n}\nasync presentToastbottom(msg) {\n  const toast = await this.toastCtrl.create({\n    message: msg,\n    duration: 4000,//3000,\n    position: 'bottom',\n    //color: 'danger',\n    cssClass: 'toast'\n     //showCloseButton: true,\n  //   closeButtonText: \"OK\",\n  });\n  toast.present();\n       \n}\n\n}"]}